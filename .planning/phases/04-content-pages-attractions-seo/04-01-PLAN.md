---
phase: 04-content-pages-attractions-seo
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - nuxt.config.ts
  - content.config.ts
  - package.json
  - pnpm-lock.yaml
  - app/components/content/PageBanner.vue
  - app/components/content/FeatureGrid.vue
  - app/components/content/SoftCta.vue
  - app/components/content/BookingCta.vue
  - app/components/content/DistanceBadge.vue
  - app/components/content/HostTip.vue
  - app/components/ui/BreadcrumbNav.vue
  - app/components/attractions/MapConsent.vue
  - content/attractions/baerenpark-worbis.yml
  - content/attractions/burg-bodenstein.yml
  - content/attractions/burg-hanstein.yml
  - content/attractions/skywalk-sonnenstein.yml
  - content/attractions/baumkronenpfad-hainich.yml
  - content/activities/wandern.yml
  - content/activities/radfahren.yml
  - content/faq/index.yml
autonomous: true

must_haves:
  truths:
    - '@nuxtjs/seo module is installed and configured with BedAndBreakfast schema-org identity, sitemap, robots, and breadcrumb support'
    - 'Phosphor Icons render correctly in all 3 weights (duotone, regular, fill) via @nuxt/icon + @iconify-json/ph'
    - '@nuxtjs/leaflet is installed and available for map components'
    - 'All shared content page components (PageBanner, FeatureGrid, SoftCta, BookingCta, DistanceBadge, HostTip, BreadcrumbNav, MapConsent) render correctly with props'
    - 'BreadcrumbNav component is available for use on all subpages via PageBanner integration (DSGN-08)'
    - 'Nuxt Content collections for attractions, activities, and FAQ are defined with Zod schemas and all YAML data files parse without errors'
  artifacts:
    - path: 'nuxt.config.ts'
      provides: 'SEO module config with site URL, schema-org identity, sitemap, robots, leaflet module'
      contains: '@nuxtjs/seo'
    - path: 'content.config.ts'
      provides: 'Attraction, activity, and FAQ data collection schemas'
      contains: 'attractions'
    - path: 'app/components/content/PageBanner.vue'
      provides: 'Thin photo banner (300px desktop / 200px mobile) with gradient overlay, H1, subtitle, breadcrumbs'
    - path: 'app/components/content/FeatureGrid.vue'
      provides: '2x2 or 3x2 icon feature grid with 40px duotone Phosphor icons'
    - path: 'app/components/content/SoftCta.vue'
      provides: 'Soft CTA block with phone number alternative'
    - path: 'app/components/content/BookingCta.vue'
      provides: 'Booking CTA block linking to room pages'
    - path: 'app/components/content/DistanceBadge.vue'
      provides: 'Compact distance/driving time badge'
    - path: 'app/components/content/HostTip.vue'
      provides: 'Host tip callout box'
    - path: 'app/components/ui/BreadcrumbNav.vue'
      provides: 'Auto-generated breadcrumb navigation with BreadcrumbList schema'
    - path: 'app/components/attractions/MapConsent.vue'
      provides: 'Two-click DSGVO consent wrapper for all Leaflet maps'
    - path: 'content/attractions/baerenpark-worbis.yml'
      provides: 'Baerenpark attraction data'
    - path: 'content/faq/index.yml'
      provides: 'FAQ items for /kontakt/ page'
  key_links:
    - from: 'nuxt.config.ts'
      to: '@nuxtjs/seo'
      via: 'modules array'
      pattern: '@nuxtjs/seo'
    - from: 'app/components/ui/BreadcrumbNav.vue'
      to: 'nuxt-seo-utils'
      via: 'useBreadcrumbItems composable'
      pattern: 'useBreadcrumbItems'
    - from: 'content.config.ts'
      to: 'content/attractions/*.yml'
      via: 'defineCollection source glob'
      pattern: 'attractions'
---

<objective>
Install Phase 4 modules (@nuxtjs/seo, @iconify-json/ph, @nuxtjs/leaflet), configure unified SEO infrastructure (site identity, Schema.org BedAndBreakfast, sitemap, robots, breadcrumbs), create all shared content page components, define Nuxt Content data collections for attractions/activities/FAQ, and write all YAML data files.

Purpose: This plan establishes the foundation that all Phase 4 content pages, attraction pages, and SEO features depend on. Without the SEO module, shared components, and data collections, no content pages can be built correctly.

Output: Configured SEO module with BedAndBreakfast identity, 8 reusable components (7 content + 1 shared MapConsent), 3 Nuxt Content data collections with Zod schemas, and 8 YAML data files (5 attractions, 2 activities, 1 FAQ).
</objective>

<execution_context>
@C:\Users\bernt\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\bernt\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-content-pages-attractions-seo/04-CONTEXT.md
@.planning/phases/04-content-pages-attractions-seo/04-RESEARCH.md
@.planning/phases/01-foundation-legal-compliance/01-01-SUMMARY.md

Key prior context:

- nuxt.config.ts exists with modules: ['@nuxt/fonts', '@nuxt/image', '@nuxt/eslint', '@vueuse/nuxt']
- Tailwind v4 with sage green, waldhonig, charcoal, cream design tokens
- Lora Variable (serif headings) + DM Sans Variable (sans body) fonts
- No content.config.ts exists yet (will be created fresh OR extended if Phase 2 created one before this runs)
- @nuxt/icon may already be installed from Phase 2 -- check package.json before installing
- App structure: app/pages/index.vue, app/app.vue, app/app.config.ts, app/assets/css/main.css
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Install Phase 4 modules and configure SEO infrastructure</name>
  <files>
    package.json
    pnpm-lock.yaml
    nuxt.config.ts
  </files>
  <action>
1. Install Phase 4 dependencies:
   ```bash
   pnpm add -D @iconify-json/ph
   pnpm add @nuxtjs/seo @nuxtjs/leaflet
   ```
   NOTE: If @nuxt/icon is NOT already in package.json (check first), also run `pnpm add @nuxt/icon`. Phase 2 should have installed it, but verify.

2. Update nuxt.config.ts modules array. CRITICAL: @nuxtjs/seo MUST come BEFORE @nuxt/content in the modules array (if @nuxt/content is present). Place @nuxtjs/seo first, then @nuxtjs/leaflet, then existing modules.

   Add to nuxt.config.ts:

   ```typescript
   modules: [
     '@nuxtjs/seo',        // MUST be first (before @nuxt/content)
     '@nuxtjs/leaflet',
     '@nuxt/icon',         // Only if not already present
     // ... existing modules (@nuxt/fonts, @nuxt/image, @nuxt/eslint, @vueuse/nuxt)
     // @nuxt/content (if present from Phase 2)
   ],
   ```

3. Add site config block to nuxt.config.ts (top-level, not nested inside another config):

   ```typescript
   site: {
     url: 'https://www.pension-volgenandt.de',
     name: 'Pension Volgenandt',
     description: 'Familiaer gefuehrte Pension in Breitenbach, Eichsfeld. Ferienwohnungen und Zimmer mit Blick ins Gruene.',
     defaultLocale: 'de',
   },
   ```

4. Add schemaOrg config block to nuxt.config.ts:

   ```typescript
   schemaOrg: {
     identity: {
       type: 'LocalBusiness',
       subtype: 'BedAndBreakfast',
       name: 'Pension Volgenandt',
       description: 'Familiaer gefuehrte Pension in Breitenbach, Eichsfeld. Ferienwohnungen und Zimmer mit Blick ins Gruene.',
       url: 'https://www.pension-volgenandt.de',
       logo: '/img/logo.webp',
       telephone: '+49 3605 542775',
       email: 'kontakt@pension-volgenandt.de',
       address: {
         streetAddress: 'Otto-Reuter-Strasse 28',
         addressLocality: 'Leinefelde-Worbis OT Breitenbach',
         postalCode: '37327',
         addressRegion: 'Thueringen',
         addressCountry: 'DE',
       },
       geo: {
         latitude: 51.3747,
         longitude: 10.2197,
       },
       sameAs: [],
       amenityFeature: [
         { name: 'WiFi', value: true },
         { name: 'Parking', value: true },
         { name: 'Breakfast', value: true },
       ],
       petsAllowed: true,
     },
   },
   ```

5. Add sitemap and robots config blocks:

   ```typescript
   sitemap: {
     // Auto-discovers all prerendered routes
   },
   robots: {
     groups: [
       { userAgent: '*', allow: '/' },
     ],
   },
   ```

6. Run `pnpm dev` to verify the dev server starts without errors, then stop it.
   </action>
   <verify>
   Run `pnpm build 2>&1 | tail -20` -- build completes without module-related errors.
   Check `cat package.json | grep -E "nuxtjs/seo|iconify-json/ph|nuxtjs/leaflet"` -- all 3 deps present.
   Check `grep -c "@nuxtjs/seo" nuxt.config.ts` returns 1.
   </verify>
   <done>
   @nuxtjs/seo, @iconify-json/ph, and @nuxtjs/leaflet are installed. nuxt.config.ts has site config, schemaOrg identity (BedAndBreakfast), sitemap, robots, and leaflet module. Dev server starts cleanly.
   </done>
   </task>

<task type="auto">
  <name>Task 2: Create shared content page components</name>
  <files>
    app/components/content/PageBanner.vue
    app/components/content/FeatureGrid.vue
    app/components/content/SoftCta.vue
    app/components/content/BookingCta.vue
    app/components/content/DistanceBadge.vue
    app/components/content/HostTip.vue
    app/components/ui/BreadcrumbNav.vue
    app/components/attractions/MapConsent.vue
  </files>
  <action>
Create 7 reusable components used by all content pages and attraction pages:

1. **app/components/ui/BreadcrumbNav.vue** -- Auto-generated breadcrumb navigation using `useBreadcrumbItems()` from nuxt-seo-utils. Props: none (auto-detects route). Uses `schemaOrg: true` for BreadcrumbList structured data. Overrides first item label to 'Startseite' (German). Renders as `<nav aria-label="Breadcrumb">` with `<ol>` list. Items are NuxtLink for non-current items, `<span aria-current="page">` for current. Separator: `ph:caret-right` icon (size-3). White text for use inside dark banner overlays. See Pattern 9 in 04-RESEARCH.md for exact code.

2. **app/components/content/PageBanner.vue** -- Thin photo-backed banner per CONTEXT.md decisions. Props: `image: string`, `imageAlt: string`, `title: string`, `subtitle?: string`. Fixed height: 200px mobile / 300px desktop (`h-[200px] md:h-[300px]`). Uses NuxtImg with `loading="eager"`, `sizes="100vw"`, `class="absolute inset-0 h-full w-full object-cover"`. Dark gradient overlay: `bg-gradient-to-t from-black/80 via-black/40 to-transparent`. Text positioned at bottom with flexbox justify-end. BreadcrumbNav rendered inside the banner above H1 (mb-2). H1: `font-serif text-3xl font-bold text-white md:text-4xl`. Subtitle: `mt-1 text-lg text-white/90`. See Pattern 2 in 04-RESEARCH.md for exact code.

3. **app/components/content/FeatureGrid.vue** -- Icon feature grid. Props: `features: Array<{ icon: string, title: string, description: string }>`. Grid layout: `grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6`. Each item: Icon component with 40px duotone icons (`class="size-10 text-sage-600"`), title (`text-lg font-semibold text-sage-900 mt-3`), description (`text-sage-700 mt-1 text-sm leading-relaxed`). Centered text alignment per item.

4. **app/components/content/SoftCta.vue** -- Soft CTA block per CONTEXT.md: "Oder rufen Sie uns direkt an" with phone link. Props: `text?: string` (override default text), `phone?: string` (override default phone). Default text: "Haben Sie Fragen? Wir helfen Ihnen gerne weiter." Phone from app.config.ts. Background: `bg-sage-50`. Contains phone icon (`ph:phone`), text, and click-to-call link (`tel:+493605542775`). Centered layout, py-12 padding.

5. **app/components/content/BookingCta.vue** -- Booking CTA block linking to room pages. Props: `text?: string`, `buttonText?: string`. Default text: "Finden Sie Ihr perfektes Zimmer" / button: "Zimmer ansehen". Background: `bg-waldhonig-50`. NuxtLink to `/zimmer/`. Terracotta button with white text. Centered layout, py-12 padding.

6. **app/components/content/DistanceBadge.vue** -- Compact distance badge. Props: `distanceKm: number`, `drivingMinutes: number`. Renders: inline-flex badge with `ph:map-pin-line` icon + "{distanceKm} km / {drivingMinutes} min" text. Styling: `bg-sage-100 text-sage-700 rounded-full px-3 py-1 text-sm font-medium inline-flex items-center gap-1.5`.

7. **app/components/content/HostTip.vue** -- Host tip callout box per CONTEXT.md: "Unser Tipp: ..." Props: `tip: string`. Renders: callout box with `ph:lightbulb-duotone` icon, "Unser Tipp" heading, and tip text. Styling: `bg-cream border-l-4 border-waldhonig-400 p-6 rounded-r-lg`. Icon: `size-8 text-waldhonig-500`.

8. **app/components/attractions/MapConsent.vue** -- Two-click DSGVO consent wrapper for Leaflet maps. Shared by the Kontakt page directions map (04-02) and the Ausflugsziele overview map (04-03). Props: `placeholderImage: string`, `placeholderAlt: string`, `height?: string` (default 'h-[350px] md:h-[450px]'). Shows a static placeholder image with dark overlay, ph:map-pin-duotone icon, explanation text ("Zum Laden der interaktiven Karte wird eine Verbindung zu OpenStreetMap-Servern hergestellt."), "Karte laden" button (waldhonig), and "Auf OpenStreetMap ansehen" external link. On click, sets `mapConsented = true` and renders the `<slot>` inside `<ClientOnly>`. Also check for cookie consent 'media' category -- if already granted, skip two-click. See Pattern 5 in 04-RESEARCH.md for exact code. NOTE: The `useCookieConsent()` composable may or may not exist yet depending on Phase 1 execution. If it doesn't exist, use a simple local ref without the cookie consent integration (add a TODO comment).

IMPORTANT: All components must use only Tailwind classes from the existing design token system (sage-_, waldhonig-_, charcoal-_, cream). Use `font-serif` for headings (maps to Lora Variable) and default sans for body (maps to DM Sans Variable).
</action>
<verify>
All 8 component files exist: `ls app/components/content/_.vue app/components/ui/BreadcrumbNav.vue app/components/attractions/MapConsent.vue`    Each file has`<script setup lang="ts">`and`<template>`blocks.
    Run`pnpm typecheck` to verify no TypeScript errors in components.
</verify>
<done>
8 shared components created with TypeScript props, Tailwind styling using design tokens, Phosphor icons via @nuxt/icon, and proper accessibility attributes. BreadcrumbNav uses useBreadcrumbItems() with Schema.org integration. MapConsent provides DSGVO-compliant two-click consent wrapper for all Leaflet maps.
</done>
</task>

<task type="auto">
  <name>Task 3: Create content data collections and all YAML data files</name>
  <files>
    content.config.ts
    content/attractions/baerenpark-worbis.yml
    content/attractions/burg-bodenstein.yml
    content/attractions/burg-hanstein.yml
    content/attractions/skywalk-sonnenstein.yml
    content/attractions/baumkronenpfad-hainich.yml
    content/activities/wandern.yml
    content/activities/radfahren.yml
    content/faq/index.yml
  </files>
  <action>
1. **Create or extend content.config.ts** at project root. If the file already exists (from Phase 2 with rooms collection), ADD the new collections alongside existing ones. If it does not exist, create fresh. Use `defineCollection` and `defineContentConfig` from `@nuxt/content` with `z` from `zod`.

Define 3 new collections:

**attractions** collection:

- type: 'data', source: 'attractions/\*.yml'
- Schema (attractionSchema): name (string), slug (string), seoTitle (string, max 60), seoDescription (string, max 155), heroImage (string), heroImageAlt (string), distanceKm (number), drivingMinutes (number), category (enum: 'natur', 'kultur', 'aktivitaet'), shortDescription (string), intro (string), content (string -- 3-5 paragraphs), hostTip (string), bestTimeToVisit (string, optional), openingHours (string, optional), entryPrice (string, optional), website (url, optional), coordinates (object: lat number, lng number), gallery (array of {src, alt}, default []), sortOrder (number, default 0)

**activities** collection:

- type: 'data', source: 'activities/\*.yml'
- Schema (activitySchema): name (string), slug (string), seoTitle (string, max 60), seoDescription (string, max 155), heroImage (string), heroImageAlt (string), intro (string), regionDescription (string), routes (array min 3 max 5 of {name, distance, difficulty enum leicht/mittel/schwer, highlight, externalUrl optional}), externalPortals (array of {name, url}, default [])

**faq** collection:

- type: 'data', source: 'faq/index.yml'
- Schema wrapping: z.object({ items: z.array(faqItemSchema) }) where faqItemSchema has: question (string), answer (string -- can include HTML links), category (enum: buchung, ausstattung, umgebung, anreise), relatedPage (string, optional), sortOrder (number, default 0)

See Pattern 4 in 04-RESEARCH.md for exact schema code.

2. **Write 5 attraction YAML files** in content/attractions/. Each file follows the attractionSchema. Use the Baerenpark example in 04-RESEARCH.md as the template. For the other 4 attractions, write original German content in warm "Wir" voice with factual details from publicly available info:
   - **baerenpark-worbis.yml**: Alternativer Baerenpark Worbis, 12 km, natur category. Bears/wolves rescue sanctuary. Use content from research.
   - **burg-bodenstein.yml**: Burg Bodenstein, ~20 km, kultur category. Medieval castle, now conference/event center, panoramic views, chapel, cafe.
   - **burg-hanstein.yml**: Burg Hanstein, ~18 km, kultur category. Castle ruin near Bornhagen, one of largest castle ruins in central Germany, panoramic views of Werra valley.
   - **skywalk-sonnenstein.yml**: Skywalk Sonnenstein, ~25 km, natur category. Viewing platform near Sontra, panoramic views, canopy walk.
   - **baumkronenpfad-hainich.yml**: Baumkronenpfad Hainich, ~45 km, natur category. UNESCO World Heritage beech forest, treetop walkway at 44m height.

   All content paragraphs should be 3-5 paragraphs in German. Include hostTip in "Unser Tipp: ..." format. Coordinates should be approximate (look up on OpenStreetMap). Set heroImage to placeholder paths like `/img/attractions/[slug].webp` and heroImageAlt to descriptive German text. Gallery arrays can be empty for now.

3. **Write 2 activity YAML files** in content/activities/:
   - **wandern.yml**: Name "Wandern im Eichsfeld", slug "wandern". Intro about hiking in the Eichsfeld region. regionDescription about the landscape character. 3 routes with names, distances, difficulties, highlights, and external URLs (use komoot.de or outdooractive.com links). externalPortals: komoot, outdooractive.
   - **radfahren.yml**: Name "Radfahren & Leine-Radweg", slug "radfahren". Intro about cycling. regionDescription about the Leine-Radweg and Eichsfeld cycling character. 3 routes including the Leine-Radweg. externalPortals: komoot, outdooractive.

4. **Write FAQ YAML file** at content/faq/index.yml. Include 12 FAQ items covering all categories (buchung, ausstattung, umgebung, anreise) in warm "Wir" family voice. Use the exact FAQ content from 04-RESEARCH.md Pattern example, which has 12 items. Include HTML links in answers where cross-linking to other pages (use `<a href="/familie/">Familienseite</a>` style links).

IMPORTANT: All text content must be in German. Use umlauts as "ae", "oe", "ue" in filenames/slugs but proper German in display text (or ae/oe/ue consistently -- match the convention used in Phase 2 YAML files if they exist; if not, use ae/oe/ue for technical consistency since the existing codebase uses this pattern).
</action>
<verify>
All 8 YAML files exist: `ls content/attractions/*.yml content/activities/*.yml content/faq/index.yml`
content.config.ts exists and contains 'attractions', 'activities', 'faq' collection definitions.
Run `pnpm build 2>&1 | tail -20` -- build completes without content schema validation errors.
</verify>
<done>
content.config.ts defines 3 new data collections (attractions, activities, faq) with Zod schemas. 5 attraction YAML files with full German content, host tips, coordinates, and practical info. 2 activity YAML files with region descriptions and 3 routes each. 1 FAQ YAML file with 12 items across 4 categories. All data validates against schemas at build time.
</done>
</task>

</tasks>

<verification>
1. `pnpm build` completes successfully with no errors
2. `grep "@nuxtjs/seo" nuxt.config.ts` returns a match
3. `grep "BedAndBreakfast" nuxt.config.ts` returns a match
4. All 8 shared components exist and have TypeScript props (7 content + MapConsent)
5. All 8 YAML files parse without Zod validation errors during build
6. BreadcrumbNav component uses `useBreadcrumbItems()` composable
7. PageBanner renders at 200px mobile / 300px desktop with gradient overlay
</verification>

<success_criteria>

- SEO module installed and configured with BedAndBreakfast identity
- 8 shared components ready for use by Plans 04-02 and 04-03 (includes MapConsent for DSGVO-compliant map loading)
- 3 Nuxt Content data collections (attractions, activities, faq) with strict Zod schemas
- 8 YAML data files with complete German content ready for page templates
- Build passes cleanly
  </success_criteria>

<output>
After completion, create `.planning/phases/04-content-pages-attractions-seo/04-01-SUMMARY.md`
</output>
