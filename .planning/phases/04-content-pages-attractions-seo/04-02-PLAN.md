---
phase: 04-content-pages-attractions-seo
plan: 02
type: execute
wave: 2
depends_on: ['04-01']
files_modified:
  - app/pages/familie.vue
  - app/pages/nachhaltigkeit.vue
  - app/pages/aktivitaeten/index.vue
  - app/pages/kontakt.vue
  - app/components/contact/Form.vue
  - app/components/contact/FaqAccordion.vue
  - app/components/contact/FaqItem.vue
  - app/components/contact/DirectionsMap.vue
autonomous: true

must_haves:
  truths:
    - 'Visitor can navigate to /familie/ and sees a complete German page with thin photo banner, personal intro, icon feature grid with family amenities, narrative section, and booking CTA'
    - 'Visitor can navigate to /nachhaltigkeit/ and sees sustainability content with Phosphor icons for solar, compost, water, and nature features'
    - 'Visitor can navigate to /aktivitaeten/ and sees an activity overview page with cards linking to Wandern and Radfahren subpages plus attraction links'
    - 'Visitor can navigate to /kontakt/ and sees a contact form (Name, Email, Message), click-to-call phone link, email address, OpenStreetMap with pension pin (consent-gated), and text-based driving directions'
    - 'Visitor scrolling down on /kontakt/ sees a FAQ accordion with 12 questions covering booking, amenities, location, and travel -- each expandable/collapsible with smooth animation'
    - 'FAQPage structured data is present in the HTML source of /kontakt/'
    - 'Every content page has unique meta title (max 60 chars), description (max 155 chars), canonical URL, and Open Graph tags'
  artifacts:
    - path: 'app/pages/familie.vue'
      provides: 'Familie & Kinder content page with full German content'
    - path: 'app/pages/nachhaltigkeit.vue'
      provides: 'Nachhaltigkeit content page with sustainability features'
    - path: 'app/pages/aktivitaeten/index.vue'
      provides: 'Aktivitaeten overview page with activity and attraction cards'
    - path: 'app/pages/kontakt.vue'
      provides: 'Contact page with form, FAQ, map, driving directions, FAQPage schema'
    - path: 'app/components/contact/Form.vue'
      provides: 'Contact form with Netlify Forms (hidden form detection) and AJAX submission'
    - path: 'app/components/contact/FaqAccordion.vue'
      provides: 'FAQ accordion container managing open/close state'
    - path: 'app/components/contact/FaqItem.vue'
      provides: 'Single FAQ item with expand/collapse animation and ARIA attributes'
    - path: 'app/components/contact/DirectionsMap.vue'
      provides: 'OpenStreetMap with pension marker, consent-gated via MapConsent'
  key_links:
    - from: 'app/pages/kontakt.vue'
      to: 'content/faq/index.yml'
      via: "queryCollection('faq')"
      pattern: 'queryCollection.*faq'
    - from: 'app/pages/kontakt.vue'
      to: 'nuxt-schema-org'
      via: 'useSchemaOrg with FAQPage'
      pattern: 'useSchemaOrg|defineFaqPage'
    - from: 'app/components/contact/Form.vue'
      to: 'Netlify Forms'
      via: 'hidden form + AJAX POST with URL-encoded body'
      pattern: 'data-netlify'
    - from: 'app/pages/familie.vue'
      to: 'app/components/content/PageBanner.vue'
      via: 'component import'
      pattern: 'ContentPageBanner|PageBanner'
---

<objective>
Build all 4 content pages (Familie, Nachhaltigkeit, Aktivitaeten, Kontakt) with complete rewritten German content in warm family "Wir" voice, following the locked page pattern (thin photo banner, personal intro, icon feature grid, narrative section, soft CTA, booking CTA). Build the Kontakt page with a 3-field contact form (Netlify Forms), FAQ accordion with 12 items and FAQPage schema, consent-gated OpenStreetMap, and text-based driving directions.

Purpose: These are the core informational pages that tell the pension's story and help visitors make contact. The Kontakt page with FAQ is also the primary SEO asset for long-tail question queries.

Output: 4 content pages with full German content, 1 contact form component, 3 FAQ components, 1 directions map component, all with per-page SEO meta. MapConsent wrapper is provided by 04-01.
</objective>

<execution_context>
@C:\Users\bernt\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\bernt\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-content-pages-attractions-seo/04-CONTEXT.md
@.planning/phases/04-content-pages-attractions-seo/04-RESEARCH.md
@.planning/phases/04-content-pages-attractions-seo/04-01-SUMMARY.md

Key dependencies from 04-01:

- PageBanner, FeatureGrid, SoftCta, BookingCta components exist in app/components/content/
- BreadcrumbNav exists in app/components/ui/
- DistanceBadge and HostTip exist in app/components/content/
- MapConsent exists in app/components/attractions/ (created in 04-01, shared component)
- @nuxtjs/seo configured with site URL and schema identity
- @nuxtjs/leaflet installed
- content/faq/index.yml has 12 FAQ items with Zod-validated schema
- Design tokens: sage-_, waldhonig-_, charcoal-\*, cream
- Fonts: font-serif (Lora Variable), default sans (DM Sans Variable)
  </context>

<tasks>

<task type="auto">
  <name>Task 1: Create Familie, Nachhaltigkeit, and Aktivitaeten content pages</name>
  <files>
    app/pages/familie.vue
    app/pages/nachhaltigkeit.vue
    app/pages/aktivitaeten/index.vue
  </files>
  <action>
Create 3 content pages following the locked pattern from CONTEXT.md. Each page MUST follow this structure:
1. Thin photo banner (ContentPageBanner)
2. Personal intro (2-3 sentences, "Wir" voice)
3. Icon feature grid (ContentFeatureGrid)
4. Narrative section with photo (NuxtImg + text in 2-col grid)
5. Detail list (optional, if content warrants it)
6. Soft CTA (ContentSoftCta)
7. Booking CTA (ContentBookingCta)

IMPORTANT RULES:

- Never more than 4 lines of text without a visual break (icon, heading, image, or whitespace)
- No emojis -- only Phosphor Icon components
- All content in German, warm "Wir" family voice
- Each page gets `definePageMeta({ breadcrumb: { label: 'Page Name' } })` for breadcrumb labels
- Each page uses `useSeoMeta()` for title (max 60 chars), description (max 155 chars), ogTitle, ogDescription, ogImage
- Each page uses `useHead()` for canonical URL with trailing slash and hreflang="de"

**app/pages/familie.vue** (/familie/):

- SEO title: "Familie & Kinder | Pension Volgenandt" (38 chars)
- SEO description: "Familienurlaub im Eichsfeld: Spielplatz, Garten, Kinderfahrzeuge, Kinderbetten und mehr. Pension Volgenandt in Breitenbach." (~125 chars)
- Banner image: `/img/banners/familie-banner.webp`, alt: "Kinder spielen im Garten der Pension Volgenandt"
- Subtitle: "Bei uns sind die Kleinen die Groessten"
- Intro: Write 2-3 sentences about how the pension is a great place for families, mentioning the big garden and countryside setting
- FeatureGrid items (6 items, all duotone icons):
  - ph:baby-duotone "Kinderbetten & Hochstuehle" "Kostenlos in jedem Zimmer verfuegbar"
  - ph:plant-duotone "Grosser Garten" "Viel Platz zum Spielen und Entdecken"
  - ph:car-duotone "Kinderfahrzeuge" "Bobbycars, Dreirad und mehr"
  - ph:tree-duotone "Spielplatz" "Schaukel, Rutsche und Sandkasten"
  - ph:dog-duotone "Haustiere willkommen" "Hunde sind bei uns gerne gesehen"
  - ph:mountains-duotone "Natur erleben" "Wanderwege direkt vor der Tuer"
- Narrative section: Photo + text about the garden and play area
- Booking CTA with family-themed text

**app/pages/nachhaltigkeit.vue** (/nachhaltigkeit/):

- SEO title: "Nachhaltigkeit | Pension Volgenandt" (35 chars)
- SEO description: "Solarenergie, Kompostierung, Insektenschutz -- nachhaltig urlauben in der Pension Volgenandt im Eichsfeld." (~108 chars)
- Banner image: `/img/banners/nachhaltigkeit-banner.webp`, alt: "Blick ueber den gruenen Garten der Pension"
- Subtitle: "Verantwortung fuer Natur und Umgebung"
- Intro: 2-3 sentences about the family's commitment to sustainability, personal tone
- FeatureGrid items (6 items, all duotone icons):
  - ph:sun-duotone "Solarenergie" "Strom aus eigener Photovoltaikanlage"
  - ph:recycle-duotone "Kompostierung" "Organische Abfaelle werden kompostiert"
  - ph:drop-duotone "Eigene Klaeranlage" "Biologische Abwasserbehandlung"
  - ph:butterfly-duotone "Insektenschutz" "Bluehwiesen und Nisthilfen"
  - ph:tree-duotone "Naturnaher Garten" "Einheimische Pflanzen und alte Obstsorten"
  - ph:leaf-duotone "Regionale Produkte" "Fruehstueck mit Zutaten aus der Region"
- Narrative section: Photo + text about specific sustainability measures
- Soft CTA: "Haben Sie Fragen zu unseren Nachhaltigkeitsmassnahmen?"

**app/pages/aktivitaeten/index.vue** (/aktivitaeten/):

- SEO title: "Aktivitaeten im Eichsfeld | Pension Volgenandt" (47 chars)
- SEO description: "Wandern, Radfahren, Burgen und Natur: Entdecken Sie die Aktivitaeten rund um die Pension Volgenandt im Eichsfeld." (~114 chars)
- Banner image: `/img/banners/aktivitaeten-banner.webp`, alt: "Wanderweg durch die Huegel des Eichsfelds"
- Subtitle: "Entdecken Sie das Eichsfeld"
- Intro: 2-3 sentences about the Eichsfeld region being ideal for outdoor activities
- Fetch top 3 attractions: `const { data: attractions } = await useAsyncData('aktivitaeten-attractions', () => queryCollection('attractions').order('sortOrder', 'ASC').limit(3).all())`
- Two sections with cards:
  1. "Sportliche Aktivitaeten" -- cards for Wandern (/aktivitaeten/wandern/) and Radfahren (/aktivitaeten/radfahren/) with icons and brief descriptions
  2. "Ausflugsziele in der Naehe" -- cards for top 3 attractions (from queryCollection above) with DistanceBadge, linking to /ausflugsziele/[slug]/ pages, plus a "Alle Ausflugsziele" link to /ausflugsziele/
- Each card: NuxtLink wrapper, icon or placeholder image, title, short description, arrow icon
- Booking CTA at bottom

NOTE: Use placeholder banner image paths (e.g., `/img/banners/familie-banner.webp`). These images may not exist yet -- the pages will still render correctly with NuxtImg showing the broken image gracefully. Photo sourcing is a separate pre-launch task.
</action>
<verify>
All 3 page files exist: `ls app/pages/familie.vue app/pages/nachhaltigkeit.vue app/pages/aktivitaeten/index.vue`
Each file has `useSeoMeta()` and `useHead()` calls.
Each file has `definePageMeta()` with breadcrumb label.
Run `pnpm typecheck` -- no errors in new page files.
</verify>
<done>
3 content pages created with complete German content in "Wir" voice, each following the locked page pattern (banner, intro, feature grid, narrative, CTA). Each page has unique SEO meta, canonical URL, OG tags, and breadcrumb label.
</done>
</task>

<task type="auto">
  <name>Task 2: Create Kontakt page sub-components (form, FAQ accordion, directions map)</name>
  <files>
    app/components/contact/Form.vue
    app/components/contact/FaqAccordion.vue
    app/components/contact/FaqItem.vue
    app/components/contact/DirectionsMap.vue
  </files>
  <action>
Create the 4 sub-components needed by the Kontakt page. MapConsent.vue is already created in 04-01 and available at app/components/attractions/MapConsent.vue.

1. **app/components/contact/DirectionsMap.vue** -- Leaflet map showing the pension location. Uses MapConsent wrapper (from 04-01). Inside the slot, renders LMap centered on pension coordinates [51.3747, 10.2197] at zoom 13, with LTileLayer from openstreetmap.org and a single LMarker for the pension with LPopup showing "Pension Volgenandt" + address. Placeholder image: `/img/map/kontakt-placeholder.webp`. Set `use-global-leaflet: false` on LMap.

2. **app/components/contact/FaqItem.vue** -- Single FAQ accordion item. Props: `question: string`, `answer: string`, `isOpen: boolean`. Emits: `toggle`. Button with `aria-expanded` binding. Question text as button label. ph:caret-down icon that rotates 180deg when open. Answer content uses `v-html` (FAQ answers contain HTML links). Transition: `max-h-0` to `max-h-96` with `transition-all duration-300`. See Pattern 6 in 04-RESEARCH.md.

3. **app/components/contact/FaqAccordion.vue** -- FAQ accordion container. Props: `items: Array<{ question: string, answer: string, category: string, relatedPage?: string }>`. Manages `openIndex` ref (only one item open at a time). Toggle function sets openIndex to null if same index, otherwise to new index. Maps over items rendering ContactFaqItem for each.

4. **app/components/contact/Form.vue** -- Contact form with Netlify Forms. Three fields: Name (text, required), Email (email, required), Message (textarea, required). Hidden form for Netlify SSG detection (with `hidden` attribute, `data-netlify="true"`, `data-netlify-honeypot="bot-field"`). Visible form with `@submit.prevent="handleSubmit"`. Honeypot field (hidden div with `name="bot-field"`). AJAX submission using `$fetch('/', { method: 'POST', headers: { 'Content-Type': 'application/x-www-form-urlencoded' }, body: new URLSearchParams({ 'form-name': 'kontakt', ...formData }).toString() })`. States: default, submitting (disabled button "Wird gesendet..."), submitted (success message with ph:check-circle-duotone), error (error message with retry prompt). Tailwind styling: sage borders, waldhonig submit button, rounded-lg inputs with focus rings. See Pattern 10 in 04-RESEARCH.md.
   </action>
   <verify>
   All 4 component files exist: `ls app/components/contact/*.vue`
   Contact form has Netlify detection: `grep -c "data-netlify" app/components/contact/Form.vue` returns >= 1.
   FAQ accordion has ARIA: `grep -c "aria-expanded" app/components/contact/FaqItem.vue` returns >= 1.
   Each file has `<script setup lang="ts">` and `<template>` blocks.
   Run `pnpm typecheck` -- no errors.
   </verify>
   <done>
   4 Kontakt sub-components created: DirectionsMap (consent-gated Leaflet map using MapConsent from 04-01), FaqItem (expand/collapse with ARIA), FaqAccordion (single-open state manager), Form (Netlify Forms with AJAX and states).
   </done>
   </task>

<task type="auto">
  <name>Task 3: Assemble Kontakt page with all sections</name>
  <files>
    app/pages/kontakt.vue
  </files>
  <action>
Assemble the Kontakt page using the sub-components created in Task 2. This is the most content-rich page with 4 distinct sections.

**app/pages/kontakt.vue** (/kontakt/):

- SEO title: "Kontakt | Pension Volgenandt" (28 chars)
- SEO description: "Kontaktieren Sie die Pension Volgenandt: Telefon, E-Mail oder Kontaktformular. Anfahrt von der A38 und Bahnhof Leinefelde." (~123 chars)
- definePageMeta({ breadcrumb: { label: 'Kontakt' } })
- useSeoMeta() for title, description, ogTitle, ogDescription, ogImage
- useHead() for canonical URL with trailing slash and hreflang="de"
- PageBanner: `/img/banners/kontakt-banner.webp`, "Kontakt & Anfahrt", subtitle "Wir freuen uns auf Sie"
- LAYOUT (per CONTEXT.md -- phone, email, form with EQUAL prominence):
  Section 1: Contact info + Form side by side (md:grid-cols-2)
  Left column: Phone (ph:phone icon + click-to-call tel: link), Email (ph:envelope-simple icon + mailto: link), brief personal text
  Right column: ContactForm component
  Section 2: Driving directions
  Heading "Anfahrt"
  Two-column layout:
  Left: Text directions from A38 ("Von der A38 nehmen Sie die Ausfahrt Leinefelde...") and from Bahnhof Leinefelde ("Vom Bahnhof Leinefelde sind es 8 km...")
  Right: DirectionsMap component (consent-gated OpenStreetMap)
  Section 3: FAQ accordion
  Heading "Haeufige Fragen"
  Fetch FAQ data: `const { data: faqData } = await useAsyncData('faq', () => queryCollection('faq').first())`
  Render ContactFaqAccordion with faqData.items
  Section 4: FAQPage structured data via useSchemaOrg:
  ```typescript
  useSchemaOrg([
    defineFaqPage({
      mainEntity: faqItems.map((item) => ({
        '@type': 'Question',
        name: item.question,
        acceptedAnswer: {
          '@type': 'Answer',
          text: item.answer.replace(/<[^>]*>/g, ''), // Strip HTML for schema
        },
      })),
    }),
  ])
  ```
  SoftCta + BookingCta at bottom

IMPORTANT: Use phone number from app.config.ts (check what's configured there). If app.config has contact.phone and contact.email, use those. Otherwise use +49 3605 542775 and kontakt@pension-volgenandt.de.
</action>
<verify>
File exists: `ls app/pages/kontakt.vue`
Kontakt page has FAQPage schema: `grep -c "defineFaqPage\|useSchemaOrg" app/pages/kontakt.vue` returns >= 1.
Kontakt page has SEO meta: `grep -c "useSeoMeta" app/pages/kontakt.vue` returns >= 1.
Kontakt page has hreflang: `grep -c "hreflang" app/pages/kontakt.vue` returns >= 1.
Run `pnpm typecheck` -- no errors.
</verify>
<done>
Kontakt page assembled with: contact info + form side-by-side, driving directions with consent-gated map, FAQ accordion with 12 items, FAQPage structured data, SEO meta with hreflang, and CTAs. Phone and email displayed with equal prominence to the form. All content in German "Wir" voice.
</done>
</task>

</tasks>

<verification>
1. Navigate to /familie/ -- sees banner, intro, feature grid, narrative, CTAs
2. Navigate to /nachhaltigkeit/ -- sees sustainability content with icons
3. Navigate to /aktivitaeten/ -- sees overview with activity and attraction cards
4. Navigate to /kontakt/ -- sees form, phone, email, map, directions, FAQ
5. Click FAQ items -- accordion opens/closes with animation
6. View page source on /kontakt/ -- FAQPage JSON-LD present
7. Each page has unique `<title>` tag (max 60 chars)
8. Each page has `<meta name="description">` (max 155 chars)
9. `pnpm build` passes without errors
</verification>

<success_criteria>

- 4 content pages live with complete German content following the locked page pattern
- Contact form ready for Netlify Forms (hidden detection + AJAX)
- FAQ accordion with 12 items, expand/collapse, ARIA attributes
- FAQPage structured data on /kontakt/
- Consent-gated OpenStreetMap on /kontakt/
- Unique SEO meta on every page
  </success_criteria>

<output>
After completion, create `.planning/phases/04-content-pages-attractions-seo/04-02-SUMMARY.md`
</output>
