---
phase: 01-foundation-legal-compliance
plan: 02
type: execute
wave: 2
depends_on: ['01-01']
files_modified:
  - app/components/ui/BaseButton.vue
  - app/components/ui/BaseCard.vue
  - app/components/ui/BaseBadge.vue
  - app/components/ui/BaseIcon.vue
  - app/components/AppHeader.vue
  - app/components/AppFooter.vue
  - app/composables/useScrollHeader.ts
  - app/layouts/default.vue
autonomous: true

must_haves:
  truths:
    - 'Visitor sees a sticky header with logo text, 5 nav links, clickable phone number, and waldhonig CTA button'
    - 'Header compresses on scroll to ~60-64px height and never auto-hides'
    - 'On viewports below 1024px, nav items collapse into a hamburger menu with Menu text label; CTA button stays visible in header bar'
    - 'Visitor sees a 4-column footer with brand/tagline, contact info, quick links, and legal links'
    - 'Footer has an above-footer CTA bar with waldhonig background and a sub-footer copyright bar'
    - 'On mobile, footer reorders: CTA bar, Contact (phone first), Nav links, Brand, Legal, Copyright'
    - 'All interactive elements have minimum 48x48px touch targets'
    - 'BaseButton renders with consistent 8px border radius, proper font weight, and correct color variants'
  artifacts:
    - path: 'app/components/ui/BaseButton.vue'
      provides: 'Reusable button component with variant prop (primary/secondary/outline), size prop, NuxtLink support'
      min_lines: 30
    - path: 'app/components/ui/BaseCard.vue'
      provides: 'Card wrapper with consistent padding, 8px radius, no drop shadow'
      min_lines: 15
    - path: 'app/components/ui/BaseBadge.vue'
      provides: 'Small badge/tag component for labels'
      min_lines: 10
    - path: 'app/components/ui/BaseIcon.vue'
      provides: 'SVG icon wrapper component'
      min_lines: 10
    - path: 'app/components/AppHeader.vue'
      provides: 'Sticky header with logo, nav, phone, CTA, hamburger menu'
      min_lines: 80
    - path: 'app/components/AppFooter.vue'
      provides: '4-column footer with CTA bar, contact, nav, legal, copyright'
      min_lines: 80
    - path: 'app/composables/useScrollHeader.ts'
      provides: 'Scroll-aware header compression composable'
      min_lines: 10
    - path: 'app/layouts/default.vue'
      provides: 'Default layout wrapping pages with header + footer'
      min_lines: 8
  key_links:
    - from: 'app/layouts/default.vue'
      to: 'app/components/AppHeader.vue'
      via: 'auto-imported component'
      pattern: '<AppHeader'
    - from: 'app/layouts/default.vue'
      to: 'app/components/AppFooter.vue'
      via: 'auto-imported component'
      pattern: '<AppFooter'
    - from: 'app/components/AppHeader.vue'
      to: 'app/composables/useScrollHeader.ts'
      via: 'composable import'
      pattern: 'useScrollHeader'
    - from: 'app/components/AppHeader.vue'
      to: 'app/app.config.ts'
      via: 'useAppConfig()'
      pattern: 'useAppConfig'
    - from: 'app/components/AppFooter.vue'
      to: 'app/app.config.ts'
      via: 'useAppConfig()'
      pattern: 'useAppConfig'
---

<objective>
Build the base UI component library (Button, Card, Badge, Icon), the AppHeader with sticky compression and mobile hamburger menu, the AppFooter with 4-column layout and CTA bar, and the default page layout.

Purpose: Creates the visual shell that wraps every page. After this plan, the site has its "warm frame" -- dark header/footer grounding light content areas -- and all base components are available for legal pages and future phases.

Output: Complete responsive layout visible on every page, with working header navigation, phone link, CTA button, footer with all columns, and base UI components.
</objective>

<execution_context>
@C:\Users\bernt\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\bernt\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-legal-compliance/01-CONTEXT.md
@.planning/phases/01-foundation-legal-compliance/01-RESEARCH.md
@.planning/phases/01-foundation-legal-compliance/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Base UI components and scroll composable</name>
  <files>
    app/components/ui/BaseButton.vue
    app/components/ui/BaseCard.vue
    app/components/ui/BaseBadge.vue
    app/components/ui/BaseIcon.vue
    app/composables/useScrollHeader.ts
  </files>
  <action>
    Create four base UI components in `app/components/ui/` following DSGN-01 (consistent 8px border radius, no drop shadows) and DSGN-06 (48x48px minimum touch targets, 56px preferred for CTAs).

    **BaseButton.vue:**
    - Props: `variant` ('primary' | 'secondary' | 'outline', default 'primary'), `size` ('sm' | 'md' | 'lg', default 'md'), `to` (optional string -- if provided, renders as NuxtLink), `type` (default 'button'), `disabled` (boolean)
    - Primary variant: `bg-waldhonig-500 text-white hover:bg-waldhonig-600` -- the CTA color
    - Secondary variant: `bg-sage-700 text-white hover:bg-sage-800`
    - Outline variant: `border-2 border-sage-300 text-sage-700 hover:bg-sage-50`
    - All variants: `rounded-lg` (8px radius), `font-sans font-semibold` (DM Sans 500-600 weight), `transition-colors duration-200`
    - Size md: `px-6 py-3 text-base` (yields ~48px height). Size lg: `px-8 py-4 text-lg` (yields ~56px for CTAs). Size sm: `px-4 py-2 text-sm`
    - Use `<NuxtLink>` when `to` prop is provided, otherwise `<button>`
    - Include `focus-visible:ring-2 focus-visible:ring-waldhonig-500 focus-visible:ring-offset-2` for keyboard accessibility
    - Slot for button content

    **BaseCard.vue:**
    - Props: `padded` (boolean, default true)
    - Renders a `<div>` with `rounded-lg bg-white` (8px radius, no shadow per DSGN-01)
    - If padded: `p-6`
    - Optional border: `border border-sage-100`
    - Default slot for content

    **BaseBadge.vue:**
    - Props: `variant` ('sage' | 'waldhonig' | 'neutral', default 'sage')
    - Small inline element: `inline-flex items-center rounded-md px-2.5 py-1 text-sm font-medium`
    - Sage: `bg-sage-100 text-sage-700`
    - Terracotta: `bg-waldhonig-100 text-waldhonig-700`
    - Neutral: `bg-sage-50 text-sage-600`
    - Slot for content

    **BaseIcon.vue:**
    - Props: `name` (string, required), `size` (number, default 24), `class` (string)
    - Renders an inline SVG container: `inline-flex items-center justify-center shrink-0`
    - Uses a `<slot>` for SVG path content -- components pass SVG markup as slot content
    - Sets `width` and `height` from size prop, `viewBox="0 0 24 24"`, `fill="none"`, `stroke="currentColor"`, `stroke-width="2"`, `stroke-linecap="round"`, `stroke-linejoin="round"`
    - This is a simple SVG wrapper, not an icon library. Individual icons are inlined as SVG paths where used (keeps bundle small, no icon library dependency).

    **useScrollHeader.ts composable:**
    - Uses `useWindowScroll` from @vueuse/nuxt (auto-imported)
    - Returns `{ isCompressed: Ref<boolean> }`
    - `isCompressed` becomes true when scroll Y > 50px
    - Guard with `import.meta.client` check for SSR safety -- default to `false` on server
    - Use `watch` on the scroll Y value, not a raw event listener

    ```typescript
    export function useScrollHeader(threshold = 50) {
      const isCompressed = ref(false)

      if (import.meta.client) {
        const { y } = useWindowScroll()
        watch(y, (scrollY) => {
          isCompressed.value = scrollY > threshold
        })
      }

      return { isCompressed }
    }
    ```

  </action>
  <verify>
    Confirm all 5 files exist in correct paths.
    Run `make lint` -- passes.
    Run `make typecheck` -- passes.
    Temporarily add a BaseButton and BaseCard to the index.vue placeholder page to confirm they render correctly with the right colors, radius, and font.
  </verify>
  <done>
    Four base UI components (BaseButton, BaseCard, BaseBadge, BaseIcon) render with consistent 8px radius, correct color variants, and 48px+ touch targets. useScrollHeader composable returns reactive isCompressed state based on scroll position.
  </done>
</task>

<task type="auto">
  <name>Task 2: AppHeader with sticky compression and mobile hamburger</name>
  <files>
    app/components/AppHeader.vue
  </files>
  <action>
    Create the AppHeader component following all CONTEXT decisions exactly:

    **Structure:**
    - `<header>` element with `fixed top-0 inset-x-0 z-40` for sticky positioning
    - Dark background: `bg-charcoal-900` (the "warm frame" grounding effect)
    - Inner container: `mx-auto max-w-screen-xl px-4 lg:px-6`
    - Transition height on scroll: full height (~80px) compresses to ~64px when `isCompressed` is true
    - Use `useScrollHeader()` composable for compression state
    - Apply `transition-all duration-300` for smooth compression animation

    **Desktop (>= 1024px / breakpoint-nav):**
    Left side:
    - Text-based logo: "Pension Volgenandt" in Lora Variable (font-serif), white text, links to "/" via NuxtLink
    - Below or beside: tagline "Ruhe finden im Eichsfeld" in smaller DM Sans, sage-300 color (fades/hides when compressed)

    Center/right:
    - 5 nav items from `useAppConfig().nav`: Zimmer, Familie, Aktivitaeten, Nachhaltigkeit, Kontakt
    - Display with proper umlauts: "Aktivitaten" becomes "Aktivitaeten" -- actually use the label from config but display "Aktivitaeten" with umlaut in the UI by using a `displayLabel` mapping or storing display labels in config
    - Nav links: `text-sage-200 hover:text-white font-sans font-medium transition-colors`
    - Active route highlight: use `useRoute()` and match current path
    - Phone number: clickable `tel:+493605542775` link with phone SVG icon + "03605 542775" text, `text-sage-200 hover:text-white`
    - CTA button: "Verfuegbarkeit pruefen" using BaseButton variant="primary" size="md" -- waldhonig, stays visible at ALL viewport sizes

    **Mobile (< 1024px):**
    - Show: logo text (smaller), CTA button (always visible, never hidden in hamburger), hamburger button
    - Hamburger button: icon + "Menu" text label (accessibility for 50-60 age audience per CONTEXT)
    - Hamburger icon: three horizontal lines SVG (inline, not icon library)
    - Close icon: X SVG when menu is open

    **Hamburger menu (mobile, when open):**
    - Full-width dropdown below header, `bg-charcoal-900`
    - All 5 nav items (full text with proper umlauts), each as NuxtLink
    - Visual divider (border-t border-sage-700)
    - Phone number: full display "03605 542775" as clickable `tel:` link
    - CTA button: full-width "Verfuegbarkeit pruefen"
    - Use `useScrollLock` from @vueuse/nuxt to lock body scroll when menu is open
    - Close menu when a nav link is clicked (watch route changes)

    **Spacer:** Add a `<div>` spacer below the header in the layout (or padding-top on main) equal to header height, so content is not hidden behind the fixed header.

    Read nav items from `useAppConfig().nav` and contact info from `useAppConfig().contact`.

    For display labels with umlauts, create a computed that maps the config labels. Or better: store the labels with umlauts directly in app.config.ts (update app.config.ts nav labels to use: 'Zimmer', 'Familie', 'Aktivitaeten', 'Nachhaltigkeit', 'Kontakt' -- these ARE the display labels with proper German characters). Actually, the "ae" in "Aktivitaeten" IS the ASCII spelling. The proper umlaut would be "Aktivitaten" with the a-umlaut character. For consistency with the URL slugs (which are ASCII), keep the config labels as display labels and ensure they render properly. The label "Aktivitaeten" with ae digraph is acceptable German orthography for URLs but looks odd in navigation. Use the actual German characters in display: store display labels as separate values or use a display map: { 'Aktivitaeten': 'Aktivitaten' }. Actually simplest: just use proper German in the config labels since NuxtLink `to` is separate from `label`. Update app.config.ts nav to use proper umlauts in labels:
    ```
    { label: 'Zimmer', to: '/zimmer' },
    { label: 'Familie', to: '/familie' },
    { label: 'Aktivitaten', to: '/aktivitaeten' },  // umlaut a
    { label: 'Nachhaltigkeit', to: '/nachhaltigkeit' },
    { label: 'Kontakt', to: '/kontakt' },
    ```

    Update `app/app.config.ts` nav labels to use proper German characters (umlauts) for display while keeping ASCII `to` paths.

  </action>
  <verify>
    Run `make dev` and verify in browser:
    - Desktop (>1024px): sticky header with logo, 5 nav links, phone number, waldhonig CTA button
    - Scroll down: header compresses smoothly to ~64px
    - Mobile (<1024px): logo + CTA button visible, hamburger with "Menu" label
    - Click hamburger: menu opens with nav items, phone, CTA; body scroll is locked
    - Click nav item or close button: menu closes
    - All touch targets are at least 48px
    Run `make lint` -- passes.
    Run `make typecheck` -- passes.
  </verify>
  <done>
    Sticky header renders on all pages with compression on scroll, desktop nav with 5 items + phone + CTA, and mobile hamburger menu with Menu text label. CTA button is always visible (never hidden in hamburger). Body scroll locks when mobile menu is open.
  </done>
</task>

<task type="auto">
  <name>Task 3: AppFooter with CTA bar, 4-column layout, and default layout</name>
  <files>
    app/components/AppFooter.vue
    app/layouts/default.vue
  </files>
  <action>
    **AppFooter.vue:**

    Create the full footer following all CONTEXT decisions exactly. Dark background creates the bottom of the "warm frame."

    Structure (top to bottom):

    1. **Above-footer CTA bar:**
    - Full-width `bg-waldhonig-500` section
    - Container: `mx-auto max-w-screen-xl px-4 py-8 text-center`
    - Heading: "Bereit fuer Ihren Aufenthalt im Eichsfeld?" in Lora (font-serif), white, text-2xl
    - Use proper umlaut: "Bereit fur Ihren Aufenthalt im Eichsfeld?" with u-umlaut
    - BaseButton variant="secondary" (sage-700 on waldhonig background would be muddy -- instead use a white/outline button: `bg-white text-waldhonig-600 hover:bg-waldhonig-50`) or create an 'inverse' style. Simplest: use inline classes for this specific CTA since it is unique context. White bg button with waldhonig text on waldhonig bg.
    - Button text: "Verfugbarkeit prufen" with proper umlauts
    - The button href should go to the booking page or anchor (for now, use "#" or "/zimmer" as placeholder until Phase 5 adds booking)

    2. **Main footer: 4-column grid**
    - Dark background: `bg-charcoal-900 text-sage-200`
    - Container: `mx-auto max-w-screen-xl px-4 py-12`
    - Grid: `grid grid-cols-1 md:grid-cols-2 nav:grid-cols-4 gap-8`
    - Column headings: `font-serif text-lg font-semibold text-white mb-4`

    **Column 1 (Brand):**
    - "Pension Volgenandt" in Lora, text-xl, white (text-based logo placeholder)
    - Tagline: "Ruhe finden im Eichsfeld" in DM Sans, sage-300, italic
    - Social icons placeholder: small text "Facebook | Instagram" as links (or omit if no confirmed social presence -- per CONTEXT, include "if active". Leave placeholder comments)

    **Column 2 (Kontakt):**
    - Heading: "Kontakt"
    - Full address from useAppConfig().contact.address (street, city, country)
    - Phone: inline SVG phone icon + clickable `tel:` link with display number
    - Email: inline SVG email/mail icon + clickable `mailto:` link
    - Each with `flex items-center gap-2` for icon alignment

    **Column 3 (Entdecken):**
    - Heading: "Entdecken"
    - Links: Zimmer & Preise (/zimmer), Familie & Kinder (/familie), Aktivitaten (/aktivitaeten), Nachhaltigkeit (/nachhaltigkeit), Ausflugsziele (/ausflugsziele), Kontakt & Anfahrt (/kontakt)
    - Each as NuxtLink, `text-sage-300 hover:text-white transition-colors`
    - Use proper German characters (umlauts) in link text

    **Column 4 (Rechtliches):**
    - Heading: "Rechtliches"
    - Links: Impressum (/impressum), Datenschutz (/datenschutz), AGB (/agb)
    - "Cookie-Einstellungen" link -- this is NOT a NuxtLink, it is a `<button>` that will trigger the cookie consent settings panel. For now, make it a button with `@click` that calls a function (stub for Plan 03 which implements useCookieConsent with a `showSettings` method). Use a `data-cookie-settings` attribute or emit an event. Simplest: just make it a button that does nothing yet; Plan 03 will wire it up.
    - Trust badges area: placeholder `<div>` with comment "DEHOGA / Secure Booking badges -- pending owner confirmation"

    **Mobile reorder (per CONTEXT):**
    Order on mobile should be: CTA bar, Contact (phone first!), Nav links, Brand, Legal, Copyright.
    Use CSS `order` classes: on mobile default order, then on `nav:` breakpoint reorder to standard 4-column. Specifically:
    - Column 2 (Kontakt): `order-1 nav:order-2`
    - Column 3 (Entdecken): `order-2 nav:order-3`
    - Column 1 (Brand): `order-3 nav:order-1`
    - Column 4 (Rechtliches): `order-4 nav:order-4`

    3. **Sub-footer copyright bar:**
    - Slightly darker: `bg-charcoal-950`
    - Container: `mx-auto max-w-screen-xl px-4 py-4 text-center text-sm text-sage-400`
    - Text: "(c) 2026 Pension Volgenandt. Alle Rechte vorbehalten." -- use current year

    **default.vue layout:**
    ```vue
    <template>
      <div class="flex min-h-screen flex-col">
        <AppHeader />
        <main class="flex-1 pt-20">
          <!-- pt-20 (~80px) offsets fixed header height -->
          <slot />
        </main>
        <AppFooter />
      </div>
    </template>
    ```

    Note: CookieConsent component will be added to the layout in Plan 03.
    The `pt-20` value should match the header's full (uncompressed) height. If the header is taller/shorter, adjust accordingly. Consider using a CSS custom property or a data attribute for this, but a fixed utility class is fine for now.

  </action>
  <verify>
    Run `make dev` and verify in browser:
    - Page has sticky header at top, content area, footer at bottom
    - Footer shows waldhonig CTA bar with white button
    - Footer shows 4-column grid with all sections populated
    - Contact column: address, clickable phone link, clickable email link
    - Entdecken column: 6 navigation links
    - Rechtliches column: 3 legal links + Cookie-Einstellungen button
    - Sub-footer: copyright bar on darker background
    - Resize to mobile (<768px): columns stack, contact appears before brand
    - All footer links have hover states (sage-300 to white transition)
    - Touch targets on links/buttons are at least 48px
    Run `make lint` -- passes.
    Run `make typecheck` -- passes.
    Run `make build` -- builds successfully.
  </verify>
  <done>
    Complete site shell is visible: sticky compressing header with nav/phone/CTA, main content area, 4-column footer with CTA bar and copyright. Layout wraps all pages. Mobile footer reorders with contact first. All make commands still pass.
  </done>
</task>

</tasks>

<verification>
1. `make dev` shows a full page layout with header, content, footer
2. Header: sticky, compresses on scroll, has logo + 5 nav + phone + CTA
3. Header mobile: hamburger with "Menu" label, CTA stays visible, menu has all items + phone + CTA
4. Footer: CTA bar (waldhonig) + 4-column grid + copyright bar (darker)
5. Footer mobile: reordered (Contact first, then Nav, Brand, Legal)
6. All phone numbers are clickable tel: links
7. All email is clickable mailto: link
8. All touch targets >= 48px
9. `make lint` -- 0 errors
10. `make typecheck` -- 0 errors
11. `make build` -- succeeds
</verification>

<success_criteria>

- BaseButton renders in 3 variants (primary waldhonig, secondary sage, outline) with 8px radius and 48px+ touch targets
- BaseCard renders with 8px radius, no shadow, optional padding
- AppHeader is sticky, compresses on scroll, shows 5 nav items + phone + CTA on desktop
- AppHeader mobile hamburger has "Menu" text label, CTA always visible, body scroll locks
- AppFooter has above-footer CTA bar, 4-column layout, sub-footer copyright
- Footer mobile reorders: Contact first, then Nav, Brand, Legal
- default.vue layout wraps pages with header + footer
- All contact info (phone, email, address) sourced from app.config.ts via useAppConfig()
  </success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-legal-compliance/01-02-SUMMARY.md`
</output>
