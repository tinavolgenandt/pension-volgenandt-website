---
phase: 04.1-github-pages-github-actions-hosting
plan: 02
type: execute
wave: 2
depends_on: ["04.1-01"]
files_modified:
  - app/app.config.ts
autonomous: false

must_haves:
  truths:
    - "Pushing to main triggers the GitHub Actions workflow and the site deploys to GitHub Pages"
    - "The site is accessible at the GitHub Pages URL with all pages rendering correctly"
    - "The contact form successfully submits to Formspree and shows the success message"
    - "Build failures in the Actions workflow are clearly visible in the GitHub Actions tab"
  artifacts: []
  key_links:
    - from: "GitHub repo Settings > Pages"
      to: "GitHub Actions workflow"
      via: "Source set to 'GitHub Actions'"
      pattern: "manual configuration"
    - from: "app/app.config.ts formspreeId"
      to: "Formspree dashboard form endpoint"
      via: "form ID replacement"
      pattern: "formspreeId"
---

<objective>
Configure external services (GitHub Pages source, Formspree account) and verify the full deployment pipeline works end-to-end.

Purpose: The code from Plan 01 is complete but requires human-only configuration steps (GitHub repo settings, Formspree account creation) before the deployment can work. This plan gates on those actions and then verifies everything functions correctly.

Output: Working deployment pipeline verified by successful GitHub Actions run and accessible site.
</objective>

<execution_context>
@C:\Users\bernt\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\bernt\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04.1-github-pages-github-actions-hosting/04.1-01-SUMMARY.md
@.github/workflows/deploy.yml
@app/app.config.ts
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Configure GitHub Pages source and create Formspree form</name>
  <action>Two manual configuration steps are required that have no CLI/API equivalent:</action>
  <instructions>
**Step 1 -- GitHub Pages source (required for deployment):**
1. Go to the GitHub repository: https://github.com/tinavolgenandt/pension-volgenandt-website (or the correct repo URL)
2. Click Settings > Pages
3. Under "Build and deployment" > "Source", select **"GitHub Actions"** from the dropdown
4. Click Save

**Step 2 -- Formspree account and form (required for contact form):**
1. Go to https://formspree.io and sign up (free tier)
2. Create a new form. Name it "Kontakt" (or any name)
3. Copy the form ID -- it looks like `xAbCdEfG` (starts with 'x' followed by alphanumeric characters)
4. Provide the form ID here so Claude can update `app/app.config.ts`

**Note:** If you want to skip Formspree for now, type "skip formspree" and the placeholder ID will remain. You can set it up later.
  </instructions>
  <resume-signal>Provide the Formspree form ID (e.g., "xAbCdEfG") or type "skip formspree". Confirm GitHub Pages source is set to "GitHub Actions".</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Update Formspree form ID and trigger deployment</name>
  <files>app/app.config.ts</files>
  <action>
1. If the user provided a real Formspree form ID, replace `'xPLACEHOLDER'` in `app/app.config.ts` with the actual form ID
2. If the user typed "skip formspree", leave the placeholder as-is
3. Commit all changes and push to main to trigger the GitHub Actions deployment:
   - `git add .github/workflows/deploy.yml public/CNAME app/components/contact/Form.vue app/app.config.ts package.json`
   - Commit with appropriate message
   - `git push origin main`
4. Wait for the GitHub Actions workflow to complete (check with `gh run list --limit 1` or `gh run watch`)
5. If the workflow fails, read the logs with `gh run view --log-failed` and diagnose the issue
  </action>
  <verify>
1. `gh run list --limit 1` shows the workflow completed successfully (status: completed, conclusion: success)
2. The site is accessible at the GitHub Pages URL (check `gh api repos/{owner}/{repo}/pages --jq '.html_url'` or the URL from the deployment environment)
  </verify>
  <done>
- Formspree form ID updated (or placeholder acknowledged as skipped)
- Changes pushed to main
- GitHub Actions workflow triggered and completed successfully
- Site deployed to GitHub Pages
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Verify deployed site and contact form</name>
  <what-built>Complete GitHub Pages deployment pipeline with Formspree contact form</what-built>
  <how-to-verify>
1. Visit the GitHub Pages URL (shown in repo Settings > Pages, or from the GitHub Actions deployment output)
2. Verify the homepage loads with correct styling, images, and navigation
3. Click through several pages (Zimmer, Familie, Kontakt) to confirm all routes work
4. On the /kontakt/ page, fill out the contact form with test data and submit
5. Verify the success message appears ("Vielen Dank! Wir haben Ihre Nachricht erhalten...")
6. If Formspree was configured: check the Formspree dashboard to confirm the submission arrived
7. Verify HTTPS is working (green lock icon in browser)
8. Check that the 404 page works by visiting a non-existent URL (e.g., /this-does-not-exist/)
  </how-to-verify>
  <resume-signal>Type "approved" if the site works correctly, or describe any issues you see.</resume-signal>
</task>

</tasks>

<verification>
1. GitHub Actions workflow completes successfully on push to main
2. Site is accessible at GitHub Pages URL
3. All pages render correctly with styling and images
4. Contact form submits successfully to Formspree
5. 404 page works for unknown routes
6. HTTPS is enforced
</verification>

<success_criteria>
- GitHub Pages deployment is live and accessible
- All site pages render correctly
- Contact form submission works (or placeholder ID is acknowledged for later setup)
- Deployment pipeline is fully automated -- future pushes to main will auto-deploy
</success_criteria>

<output>
After completion, create `.planning/phases/04.1-github-pages-github-actions-hosting/04.1-02-SUMMARY.md`
</output>
