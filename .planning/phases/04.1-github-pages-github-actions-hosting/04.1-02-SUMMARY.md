---
phase: 04.1-github-pages-github-actions-hosting
plan: 02
subsystem: infra
tags: [github-pages, deployment, verification, ci-cd]

# Dependency graph
requires:
  - phase: 04.1-github-pages-github-actions-hosting
    plan: 01
    provides: "GitHub Actions workflow, Formspree contact form, clean pnpm config"
provides:
  - "Live GitHub Pages deployment at tinavolgenandt.github.io/pension-volgenandt-website/"
  - "Verified CI/CD pipeline (push to main triggers automatic build and deploy)"
  - "Fixed asset paths for GitHub Pages subpath deployment"
affects:
  - "Phase 5 (booking integration will deploy automatically via same pipeline)"
  - "Phase 6 (custom domain CNAME and DNS cutover)"

# Tech tracking
tech-stack:
  added: []
  patterns: ["useRuntimeConfig().app.baseURL for dynamic asset path prefixing in SSG subpath deployments"]

key-files:
  modified:
    - "app/app.vue"
    - "app/components/home/HeroVideo.vue"
    - "app/components/content/PageBanner.vue"
    - "nuxt.config.ts"
    - "public/site.webmanifest"

key-decisions:
  - "Favicon/manifest links moved from static nuxt.config head to dynamic useHead() in app.vue for baseURL support"
  - "Hero video/poster paths use useRuntimeConfig().app.baseURL for subpath deployment"
  - "PageBanner switched from plain <img> to <NuxtImg> for automatic baseURL handling"
  - "site.webmanifest uses relative paths (no leading /) for subpath compatibility"
  - "robots.txt generation disabled when using baseURL (module limitation)"
  - "Icon clientBundle.scan: true added to bundle icons for client-side rendering"
  - "GitHub Pages source set to GitHub Actions (manual step by repo admin)"

patterns-established:
  - "Always use useRuntimeConfig().app.baseURL for static asset paths in components deployed to subpaths"
  - "Use NuxtImg instead of plain img tags to get automatic baseURL handling"
  - "Use relative paths in site.webmanifest for subpath compatibility"

# Metrics
duration: 25min
completed: 2026-02-22
---

# Phase 4.1 Plan 02: GitHub Pages Deployment & Verification Summary

**Configured GitHub Pages, deployed site, fixed asset path issues for subpath deployment, and verified the live site**

## Performance

- **Duration:** 25 min (including path fix iteration)
- **Started:** 2026-02-22T13:45:00Z
- **Completed:** 2026-02-22T14:10:00Z
- **Tasks:** 3 (1 human action, 1 auto, 1 human verify)
- **Files modified:** 5

## Accomplishments

- GitHub Pages source configured to "GitHub Actions" (human action by repo admin)
- Code pushed to main, triggering successful CI/CD deployment (build: 1m2s, deploy: 10s)
- Fixed all hardcoded asset paths that 404'd on GitHub Pages subpath deployment
- Site live and verified at https://tinavolgenandt.github.io/pension-volgenandt-website/

## Issues Encountered & Fixed

Initial deployment revealed 404 errors for favicon, webmanifest, hero video/poster, and icons because paths were hardcoded without the `/pension-volgenandt-website/` subpath prefix.

**Root cause:** Nuxt only auto-prefixes paths in `_nuxt/` bundles and `<NuxtLink>` hrefs. Static head links, inline CSS `url()`, plain `<img>` tags, JS string constants, and `site.webmanifest` paths are NOT automatically prefixed.

**Fixes applied (commit 406ae67):**
1. Moved favicon/manifest `<link>` tags from `nuxt.config.ts` static head to `useHead()` in `app.vue` with `useRuntimeConfig().app.baseURL` prefix
2. Hero video/poster paths made dynamic using `useRuntimeConfig().app.baseURL`
3. `PageBanner.vue` switched from `<img>` to `<NuxtImg>` (handles baseURL automatically)
4. `site.webmanifest` icon paths changed from absolute (`/favicon-*.png`) to relative (`favicon-*.png`)
5. Added `icon.clientBundle.scan: true` to bundle icons for client-side rendering (fixes `/api/_nuxt_icon/` 404)
6. Added `robots: { robotsTxt: false }` (module doesn't support baseURL)

## Task Commits

1. **Task 1: Configure GitHub Pages source** — N/A (human action, no commit)
2. **Task 2: Push to trigger deployment** — N/A (push of existing commits)
3. **Task 3: Fix asset paths & verify** — `406ae67` (fix)

## Deviations from Plan

- Plan didn't anticipate the asset path issues. The fix was a necessary deviation discovered during deployment verification.
- `berntpopp` did not have admin access to configure GitHub Pages via API; repo owner configured it manually.

## User Setup Still Required

- **Formspree account:** Create account at https://formspree.io, create form, replace `xPLACEHOLDER` in `app/app.config.ts` with real form ID

## Next Phase Readiness

- CI/CD pipeline fully operational — every push to main auto-deploys
- All site pages render correctly on GitHub Pages
- Ready for Phase 5 (Booking Integration) or Phase 6 (Optimization & Launch)

---
*Phase: 04.1-github-pages-github-actions-hosting*
*Completed: 2026-02-22*
